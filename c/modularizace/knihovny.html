<!DOCTYPE HTML>
<html lang="cs" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Knihovny - Úvod do programování</title>
        
        


        <!-- Custom HTML head -->
        <style>
.xterm {
  margin-top: 10px;
}
.content {
  overflow-y: visible !important;
}
video {
    max-width: 100%;
}
</style>
<script src="https://kelvin.cs.vsb.cz/upr/animations.js"></script>


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../../favicon.svg">
        
        
        <link rel="shortcut icon" href="../../favicon.png">
        
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
        <link rel="stylesheet" href="../../theme/css/tufte.css">
        
        <link rel="stylesheet" href="../../src/wasm/xterm.min.css">
        

        
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "rust" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="../../uvod/uvod.html"><strong aria-hidden="true">1.</strong> Úvod</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../uvod/programovani.html"><strong aria-hidden="true">1.1.</strong> Programování</a></li><li class="chapter-item "><a href="../../uvod/programovaci_jazyky.html"><strong aria-hidden="true">1.2.</strong> Programovací jazyky</a></li><li class="chapter-item "><a href="../../uvod/jazyk_c.html"><strong aria-hidden="true">1.3.</strong> Jazyk C</a></li><li class="chapter-item "><a href="../../uvod/pamet.html"><strong aria-hidden="true">1.4.</strong> Paměť</a></li></ol></li><li class="chapter-item "><a href="../../prostredi/nastaveni_prostredi.html"><strong aria-hidden="true">2.</strong> Nastavení prostředí</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../prostredi/linux.html"><strong aria-hidden="true">2.1.</strong> Linux</a></li><li class="chapter-item "><a href="../../prostredi/editor.html"><strong aria-hidden="true">2.2.</strong> Editor</a></li><li class="chapter-item "><a href="../../prostredi/preklad_programu.html"><strong aria-hidden="true">2.3.</strong> Překlad</a></li><li class="chapter-item "><a href="../../prostredi/ladeni.html"><strong aria-hidden="true">2.4.</strong> Ladění</a></li></ol></li><li class="chapter-item expanded "><a href="../../c/programovani.html"><strong aria-hidden="true">3.</strong> Programování v C</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../c/syntaxe.html"><strong aria-hidden="true">3.1.</strong> Syntaxe</a></li><li class="chapter-item "><a href="../../c/prikazy_vyrazy.html"><strong aria-hidden="true">3.2.</strong> Příkazy a výrazy</a></li><li class="chapter-item "><a href="../../c/promenne/promenne.html"><strong aria-hidden="true">3.3.</strong> Proměnné</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../c/promenne/globalni_promenne.html"><strong aria-hidden="true">3.3.1.</strong> Globální proměnné</a></li><li class="chapter-item "><a href="../../c/promenne/konstanty.html"><strong aria-hidden="true">3.3.2.</strong> Konstanty</a></li><li class="chapter-item "><a href="../../c/promenne/slozeny_zapis.html"><strong aria-hidden="true">3.3.3.</strong> Složený zápis</a></li><li class="chapter-item "><a href="../../c/promenne/pojmenovavani.html"><strong aria-hidden="true">3.3.4.</strong> Pojmenovávání proměnných</a></li></ol></li><li class="chapter-item "><a href="../../c/datove_typy/datove_typy.html"><strong aria-hidden="true">3.4.</strong> Datové typy</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../c/datove_typy/celociselne_typy.html"><strong aria-hidden="true">3.4.1.</strong> Celočíselné typy</a></li><li class="chapter-item "><a href="../../c/datove_typy/desetinne_typy.html"><strong aria-hidden="true">3.4.2.</strong> Desetinné číselné typy</a></li><li class="chapter-item "><a href="../../c/datove_typy/pravdivostni_typy.html"><strong aria-hidden="true">3.4.3.</strong> Pravdivostní typy</a></li></ol></li><li class="chapter-item "><a href="../../c/rizeni_toku/rizeni_toku.html"><strong aria-hidden="true">3.5.</strong> Řízení toku</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../c/rizeni_toku/podminky.html"><strong aria-hidden="true">3.5.1.</strong> Podmínky</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../c/rizeni_toku/switch.html"><strong aria-hidden="true">3.5.1.1.</strong> Příkaz switch</a></li></ol></li><li class="chapter-item "><a href="../../c/rizeni_toku/cykly.html"><strong aria-hidden="true">3.5.2.</strong> Cykly</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../c/rizeni_toku/while.html"><strong aria-hidden="true">3.5.2.1.</strong> Cyklus while</a></li><li class="chapter-item "><a href="../../c/rizeni_toku/for.html"><strong aria-hidden="true">3.5.2.2.</strong> Cyklus for</a></li></ol></li></ol></li><li class="chapter-item "><a href="../../c/funkce/funkce.html"><strong aria-hidden="true">3.6.</strong> Funkce</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../c/funkce/rekurze.html"><strong aria-hidden="true">3.6.1.</strong> Rekurze</a></li><li class="chapter-item "><a href="../../c/funkce/stdlib.html"><strong aria-hidden="true">3.6.2.</strong> Funkce standardní knihovny</a></li></ol></li><li class="chapter-item "><a href="../../c/preprocesor/preprocesor.html"><strong aria-hidden="true">3.7.</strong> Preprocesor</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../c/preprocesor/vkladani_souboru.html"><strong aria-hidden="true">3.7.1.</strong> Vkládání souborů</a></li><li class="chapter-item "><a href="../../c/preprocesor/makra.html"><strong aria-hidden="true">3.7.2.</strong> Makra</a></li></ol></li><li class="chapter-item "><a href="../../c/prace_s_pameti/prace_s_pameti.html"><strong aria-hidden="true">3.8.</strong> Práce s pamětí</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../c/prace_s_pameti/automaticka_pamet.html"><strong aria-hidden="true">3.8.1.</strong> Automatická paměť</a></li><li class="chapter-item "><a href="../../c/prace_s_pameti/ukazatele.html"><strong aria-hidden="true">3.8.2.</strong> Ukazatele</a></li><li class="chapter-item "><a href="../../c/prace_s_pameti/dynamicka_pamet.html"><strong aria-hidden="true">3.8.3.</strong> Dynamická paměť</a></li><li class="chapter-item "><a href="../../c/prace_s_pameti/globalni_pamet.html"><strong aria-hidden="true">3.8.4.</strong> Globální paměť</a></li></ol></li><li class="chapter-item "><a href="../../c/pole/pole.html"><strong aria-hidden="true">3.9.</strong> Pole</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../c/pole/staticke_pole.html"><strong aria-hidden="true">3.9.1.</strong> Statické pole</a></li><li class="chapter-item "><a href="../../c/pole/dynamicke_pole.html"><strong aria-hidden="true">3.9.2.</strong> Dynamické pole</a></li><li class="chapter-item "><a href="../../c/pole/vicerozmerne_pole.html"><strong aria-hidden="true">3.9.3.</strong> Vícerozměrné pole</a></li></ol></li><li class="chapter-item "><a href="../../c/text/text.html"><strong aria-hidden="true">3.10.</strong> Text</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../c/text/znaky.html"><strong aria-hidden="true">3.10.1.</strong> Znaky</a></li><li class="chapter-item "><a href="../../c/text/retezce.html"><strong aria-hidden="true">3.10.2.</strong> Řetězce</a></li><li class="chapter-item "><a href="../../c/text/vstupavystup.html"><strong aria-hidden="true">3.10.3.</strong> Vstup a výstup</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../c/text/vstup.html"><strong aria-hidden="true">3.10.3.1.</strong> Vstup</a></li><li class="chapter-item "><a href="../../c/text/vystup.html"><strong aria-hidden="true">3.10.3.2.</strong> Výstup</a></li></ol></li></ol></li><li class="chapter-item "><a href="../../c/struktury/vlastni_datove_typy.html"><strong aria-hidden="true">3.11.</strong> Vlastní datové typy</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../c/struktury/struktury.html"><strong aria-hidden="true">3.11.1.</strong> Struktury</a></li><li class="chapter-item "><a href="../../c/struktury/struktury_funkce.html"><strong aria-hidden="true">3.11.2.</strong> Struktury a funkce</a></li></ol></li><li class="chapter-item "><a href="../../c/soubory/soubory.html"><strong aria-hidden="true">3.12.</strong> Soubory</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../c/soubory/otevirani_souboru.html"><strong aria-hidden="true">3.12.1.</strong> Otevření souborů</a></li><li class="chapter-item "><a href="../../c/soubory/prace_se_soubory.html"><strong aria-hidden="true">3.12.2.</strong> Práce se soubory</a></li></ol></li><li class="chapter-item expanded "><a href="../../c/modularizace/modularizace.html"><strong aria-hidden="true">3.13.</strong> Modularizace</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../c/modularizace/linker.html"><strong aria-hidden="true">3.13.1.</strong> Linker</a></li><li class="chapter-item "><a href="../../c/modularizace/pouzivani_kodu_z_jinych_souboru.html"><strong aria-hidden="true">3.13.2.</strong> Používání kódu z jiných souborů</a></li><li class="chapter-item "><a href="../../c/modularizace/hlavickove_soubory.html"><strong aria-hidden="true">3.13.3.</strong> Hlavičkové soubory</a></li><li class="chapter-item expanded "><a href="../../c/modularizace/knihovny.html" class="active"><strong aria-hidden="true">3.13.4.</strong> Knihovny</a></li><li class="chapter-item "><a href="../../c/modularizace/automatizace_prekladu.html"><strong aria-hidden="true">3.13.5.</strong> Automatizace překladu</a></li></ol></li><li class="chapter-item "><a href="../../c/aplikovane_ulohy/ulohy.html"><strong aria-hidden="true">3.14.</strong> Aplikované úlohy</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../c/aplikovane_ulohy/tga.html"><strong aria-hidden="true">3.14.1.</strong> TGA</a></li><li class="chapter-item "><a href="../../c/aplikovane_ulohy/sdl.html"><strong aria-hidden="true">3.14.2.</strong> SDL</a></li></ol></li><li class="chapter-item "><a href="../../c/co_dal.html"><strong aria-hidden="true">3.15.</strong> Co dál?</a></li></ol></li><li class="chapter-item "><a href="../../ruzne/ruzne.html"><strong aria-hidden="true">4.</strong> Různé</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../ruzne/rozklad_problemu.html"><strong aria-hidden="true">4.1.</strong> Rozklad problému</a></li><li class="chapter-item "><a href="../../ruzne/nahodna_cisla.html"><strong aria-hidden="true">4.2.</strong> Generování náhodných čísel</a></li><li class="chapter-item "><a href="../../ruzne/funkce_main.html"><strong aria-hidden="true">4.3.</strong> Funkce main</a></li><li class="chapter-item "><a href="../../ruzne/parametry_prekladace.html"><strong aria-hidden="true">4.4.</strong> Parametry překladače</a></li></ol></li><li class="chapter-item "><a href="../../ulohy/ulohy.html"><strong aria-hidden="true">5.</strong> Úlohy</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../ulohy/zaklady.html"><strong aria-hidden="true">5.1.</strong> Základy</a></li><li class="chapter-item "><a href="../../ulohy/ukazatele.html"><strong aria-hidden="true">5.2.</strong> Ukazatele</a></li><li class="chapter-item "><a href="../../ulohy/pole.html"><strong aria-hidden="true">5.3.</strong> Pole</a></li><li class="chapter-item "><a href="../../ulohy/dvourozmerne_pole.html"><strong aria-hidden="true">5.4.</strong> Dvourozměrné pole</a></li><li class="chapter-item "><a href="../../ulohy/retezce.html"><strong aria-hidden="true">5.5.</strong> Řetězce</a></li><li class="chapter-item "><a href="../../ulohy/ruzne.html"><strong aria-hidden="true">5.6.</strong> Různé</a></li></ol></li><li class="chapter-item "><a href="../../caste_chyby/caste_chyby.html"><strong aria-hidden="true">6.</strong> Časté chyby</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../caste_chyby/pametove_chyby.html"><strong aria-hidden="true">6.1.</strong> Paměťové chyby</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Úvod do programování</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        <a href="https://github.com/mrlvsb/upr-skripta" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#knihovny" id="knihovny">Knihovny</a></h1>
<p>Nyní už známe vše potřebné na to, abychom si rozdělili náš vlastní program do libovolného množství
zdrojových souborů. Často také ale budeme chtít používat kód, který už před námi napsal někdo jiný.
Pokud bychom si totiž museli vše psát od nuly, tak bychom se daleko nedostali<sup class='margin-toggle sidenote-number'>1</sup>, respektive trvalo
by nám to dlouho.</p>
<span class='sidenote'><p><sup class='number'>1</sup>I když napsat si nějaký systém &quot;od nuly&quot; je dobrý způsob, jak se
<a href="../co_dal.html#co-se-d%C3%A1le-nau%C4%8Dit">zlepšit v programování</a>.</p>
</span>
<p>Aby programátoři mohli sdílet svůj kód s ostatními programátory, tak využívají tzv. <strong>knihovny</strong>
(<em>libraries</em>). Knihovna je kód, který řeší nějakou ucelenou funkcionalitu (např.
<a href="https://www.libsdl.org/">vykreslování grafiky</a>, <a href="https://www.freetype.org/">sazbu fontů</a> nebo
<a href="http://zlib.net/">kompresi dat</a>) a obsahuje návod (dokumentaci), jak tento kód používat. Klíčové
vlastnosti knihoven jsou znovupoužitelnost (můžeme je použít v různých programech) a abstrakce
(nemusíme rozumět, jak knihovna funguje, pouze ji využijeme k vyřešení konkrétního problému).</p>
<blockquote>
<p>Knihovna není program – neobsahuje žádnou funkci <code>main</code> a nelze ji ani přímo spustit. V kontextu
jazyka <em>C</em> je knihovna typicky sada funkcí, struktur a globálních proměnných.</p>
</blockquote>
<p>Například pokud bychom programovali hru, můžeme využít knihovny na vykreslení grafiky, na přehrávání
zvuku, na snímání vstupu z klávesnice/myši atd. Náš kód se pak může zabývat zejména logikou hry a
nemusí tolik řešit problémy, které již vyřešila spousta programátorů před námi.</p>
<p>Na internetu můžete naleznout <a href="https://github.com/kozross/awesome-c">tisice různých knihoven</a>,
které řeší rozlišné problémy.</p>
<h2><a class="header" href="#sdílení-knihoven" id="sdílení-knihoven">Sdílení knihoven</a></h2>
<p>Teoreticky bychom mohli knihovny používat prostě tak, že si nějakou najdeme na internetu, stáhneme
její hlavičkové a zdrojové soubory k našeho programu a začneme je využívat. I když i tak to lze někdy
udělat, není to obvyklé, protože tento přístup má spoustu nevýhod:</p>
<ul>
<li>Jelikož obvykle nebudeme autory knihovny, kterou chceme použít, tak nemusíme ani být schopní
danou knihovnu přeložit. Potřebuje daná knihovna konkrétní překladač nebo jeho specifické nastavení?
Má závislosti na dalších knihovnách? Přeložit &quot;cizí&quot; knihovnu ze zdrojových souborů nemusí být
zdaleka přímočaré.</li>
<li>Pokud dojde k vydání nové verze knihovny, která může přinášet opravy chyb a novou funkcionalitu,
museli bychom (kromě potenciální úpravy našeho kódu) také překopírovat nebo správně upravit nové a
změněné soubory knihovny, což by bylo náročné a náchylné na chyby.</li>
<li>Zdrojový kód knihoven není vždy zveřejněn, například aby si jejich autoři uchránili duševní
vlastnictví. Často se tak setkáme se situací, že máme k dispozici pouze objektový kód (např. <code>.dll</code>
nebo <code>.so</code>) a nemůžeme zkopírovat k našemu programu zdrojové soubory.</li>
</ul>
<p>Z tohoto důvodu jsou knihovny obvykle sdíleny ve formě objektových souborů (ty obsahují implementaci
funkcí) a odpovídajících hlavičkových souborů (ty obsahují
<a href="pouzivani_kodu_z_jinych_souboru.html#deklarace-vs-definice">deklarace</a>, aby šlo knihovnu jednoduše
používat).</p>
<h2><a class="header" href="#statické-vs-dynamické-knihovny" id="statické-vs-dynamické-knihovny">Statické vs dynamické knihovny</a></h2>
<p>Předávat překladači desítky či stovky objektových souborů by bylo docela nepraktické, proto se tyto
soubory při distribuci knihovny balí do jednoho či více archivů, které mají standardizovaný formát
a překladače s nimi umí přímo pracovat. Knihovna může být distribuována v jednom ze dvou typů archivů,
které určují to, jak bude daná knihovna &quot;přilinkována&quot; (připojena) k našemu programu:</p>
<ul>
<li>
<p><strong>Dynamická knihovna</strong> (<em>dynamic library</em>) - objektové soubory takovéto knihovny nebudou součástí
našeho programu (tj. nebudou obsaženy ve spustitelném souboru, který bude vytvořen překladačem).
K jejich načtení dojde až &quot;dynamicky&quot; při spuštění programu<sup class='margin-toggle sidenote-number'>2</sup>.</p>
<span class='sidenote'><p><sup class='number'>2</sup>O toto načítání se stará tzv. <a href="https://man7.org/linux/man-pages/man8/ld.so.8.html">dynamický linker</a>.</p>
</span>
<p>Výhody tohoto přístupu jsou, že bude mít náš spustitelný soubor menší velikost, a to jak na disku,
tak v operační paměti. Operační systém totiž dokáže jednu dynamickou knihovnu sdílet více programům
zároveň. Dynamickou knihovnu také půjde aktualizovat bez nutnosti překládat znovu náš program a
můžeme také při spuštění programu knihovnu
<a href="https://stackoverflow.com/questions/426230/what-is-the-ld-preload-trick">nahradit jinou implementací</a>.</p>
<p>Nevýhodou je, že při spuštění našeho programu musíme zajistit, že knihovna bude na daném systému
k dispozici (pokud by nebyla nalezena, tak program nepůjde spustit). To může být způsobovat
problémy zejména při distribuci našeho programu na ostatní počítače. Kvůli tomu, že se knihovna
načítá dynamicky, také může v určitých případech být její použití méně efektivní než v případě
statické knihovny.</p>
<p>Archivy s objektovými soubory dynamických knihoven mají příponu <code>.so</code>.</p>
</li>
<li>
<p><strong>Statická knihovna</strong> (<em>static library</em>) - objektové soubory takovéto knihovny budou přímo přibaleny
k našemu programu (jako bychom je přímo jeden po druhém předali překladači).</p>
<p>Výhody tohoto přístupu jsou, že náš program bude &quot;samostatný&quot; – knihovnu bude obsahovat uvnitř
svého spustitelného souboru, takže nebude nutné ji mít dostupnou na cílovém systému (narozdíl
od dynamické knihovny).</p>
<p>Nevýhodou je, že výsledný spustitelný soubor bude větší a knihovnu nepůjde aktualizovat bez
opětovného překladu celého programu.</p>
<p>Archivy s objektovými soubory statických knihoven mají příponu <code>.a</code>.</p>
</li>
</ul>
<blockquote>
<p>Názvy přípon statických a dynamických knihoven závisí na operačním systému. Například na Windows
se můžete setkat s příponami <code>.lib</code> pro statické knihovny a <code>.dll</code> pro dynamické knihovny.</p>
</blockquote>
<h2><a class="header" href="#použití-knihoven-s-gcc" id="použití-knihoven-s-gcc">Použití knihoven s <code>gcc</code></a></h2>
<p>Nyní si ukážeme, jak říct překladači <code>gcc</code>, aby připojil nějakou knihovnu k našemu programu. Pro to
musíme mít k dispozici archiv s objektovými soubory knihovny (s příponou <code>.a</code> nebo <code>.so</code>, v
závislosti na typu knihovny) a obvykle také i adresář s hlavičkovými soubory knihovny.</p>
<p>Nejprve si ukážeme, jak překladači předat cestu k hlavičkovým souborům knihovny. Ty obvykle nebudou
součástí našich zdrojových kódů, ale budou nainstalovány v nějakém systémovém adresáři (jako tomu je
např. u <code>stdio.h</code>). Budeme je tedy chtít <a href="../preprocesor/vkladani_souboru.html">vkládat</a> pomocí syntaxe
<code>#include &lt;&gt;</code>. Překladači můžeme předat dodatečné adresáře, ve kterých má hledat (hlavičkové) soubory
pro vkládání, pomocí přepínače <code>-I</code>. Pokud bychom tak měli hlavičkové soubory knihovny např. v
adresáři <code>/usr/foo/include</code>, tak překladači při překladu předáme přepínač <code>-I/usr/foo/include</code>.</p>
<p>Dále je třeba překladači říct, kde nalezne archivy s objektovými soubory knihovny. K tomu slouží
dva přepínače. <code>-L</code> udává adresář, ve kterém se budou vyhledávat knihovny a <code>-l</code> poté specifikuje
konkrétní knihovnu, která má být přilinkována k našemu programu. Pokud bychom tak měli například
archiv knihovny v souboru <code>/usr/foo/lib/libknihovna.so</code>, tak překladači předáme parametry
<code>-L/usr/foo/lib</code> a <code>-lknihovna</code>. Při použití přepínače <code>-l</code> je třeba si dávat pozor na dvě věci:</p>
<ul>
<li>Všimněte si, že se použila zkrácená konvence pro pojmenování knihovny. Obecně se knihovny
pojmenovávají <code>lib&lt;název&gt;.so</code> (nebo <code>lib&lt;název&gt;.a</code>) a překladači se poté předává pouze jejich název,
tj. <code>-l&lt;název&gt;</code>.</li>
<li>Přepínač <code>-l</code> se aplikuje na zdrojové/objektové soubory, které byly v příkazové řádce zadány před
ním. Používejte jej tedy až po předání vašich zdrojových souborů:
<pre><code class="language-bash"># správně
$ gcc main.c -lknihovna

# špatně
$ gcc -lknihovna main.c
</code></pre>
</li>
</ul>
<p>Celý příkaz pro připojení knihovny k vašemu programu by tak mohl vypadat např. takto:</p>
<pre><code class="language-bash">$ gcc -o program main.c -L/usr/foo/lib/ -lfoo -I/usr/foo/include
</code></pre>
<h3><a class="header" href="#předání-cesty-k-dynamické-knihovně" id="předání-cesty-k-dynamické-knihovně">Předání cesty k dynamické knihovně</a></h3>
<p>Pokud přeložíte program s dynamickou knihovnou, může se stát, že při jeho spuštění nebude schopen
danou knihovnu najít. V takovém případě při spuštění programu můžete pomocí <strong>proměnné prostředí</strong><sup class='margin-toggle sidenote-number'>3</sup>
(<em>environment variable</em>) <code>LD_LIBRARY_PATH</code> předat cestu k adresáři, ve které se daná knihovna nachází:</p>
<span class='sidenote'><p><sup class='number'>3</sup>Proměnné prostředí jsou způsobem, jak parametrizovat chování programů (podobně jako
například <a href="../../ruzne/funkce_main.html">parametry příkazového řádku</a>. V programu si můžete přečíst
hodnotu konkrétní proměnné prostředí pomocí funkce <a href="https://devdocs.io/c/program/getenv"><code>getenv</code></a>.</p>
</span>
<pre><code class="language-bash">$ LD_LIBRARY_PATH=/usr/foo/lib ./program
</code></pre>
<h3><a class="header" href="#zobrazení-vyžadovaných-dynamických-knihoven" id="zobrazení-vyžadovaných-dynamických-knihoven">Zobrazení vyžadovaných dynamických knihoven</a></h3>
<p>Pokud si přeložíte nějaký program a použijete na něj program <code>ldd</code>, dozvíte se, které dynamické
knihovny vyžaduje ke svému běhu. Měli byste mezi nimi naleznout mj. i
<a href="../funkce/stdlib.html">standardní knihovnu <em>C</em></a> (<code>libc</code>) a dozvědět se tak její umístění na disku:</p>
<pre><code class="language-bash">$ ldd ./program
libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f0d3a328000)
</code></pre>
<blockquote>
<p><a href="../funkce/stdlib.html">Standardní knihovna jazyka <em>C</em></a> je používána téměř každým programem a mj. z
tohoto důvodu je obvykle linkována dynamicky, aby její paměť šla sdílet mezi programy.</p>
</blockquote>
<h2><a class="header" href="#vytvoření-knihovny" id="vytvoření-knihovny">Vytvoření knihovny</a></h2>
<p>Pokud byste si chtěli vytvořit vlastní knihovnu, můžete toho jednoduše dosáhnout pomocí <code>gcc</code>. Dejme
tomu, že máte soubory <code>a.c</code> a <code>b.c</code>, které chcete zabalit do knihovny. Nejprve každý zdrojový soubor
přeložíme do objektového souboru<sup class='margin-toggle sidenote-number'>4</sup>:</p>
<span class='sidenote'><p><sup class='number'>4</sup>Parametr <code>-fPIC</code> je nutný při překladu zdrojových souborů, které poté chceme umístit do
knihovny. Více se můžete dozvědět např. <a href="https://stackoverflow.com/a/5311538/1107768">zde</a>.</p>
</span>
<pre><code class="language-bash">$ gcc -c -fPIC a.c
$ gcc -c -fPIC b.c
</code></pre>
<p>Další postup závisí na tom, jaký typ knihovny chceme vytvořit:</p>
<ul>
<li><strong>Vytvoření statické knihovny</strong> - použijeme program <code>ar</code> (archiver):
<pre><code class="language-bash">$ ar rcs libknihovna.a a.o b.o
</code></pre>
</li>
<li><strong>Vytvoření dynamické knihovny</strong> - použijeme program <code>gcc</code> s přepínačem <code>-shared</code>:
<pre><code class="language-bash">$ gcc -shared a.o b.o -o libknihovna.so
</code></pre>
</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../../c/modularizace/hlavickove_soubory.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../../c/modularizace/automatizace_prekladu.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../../c/modularizace/hlavickove_soubory.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../../c/modularizace/automatizace_prekladu.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        
        <!-- Google Analytics Tag -->
        <script type="text/javascript">
            var localAddrs = ["localhost", "127.0.0.1", ""];

            // make sure we don't activate google analytics if the developer is
            // inspecting the book locally...
            if (localAddrs.indexOf(document.location.hostname) === -1) {
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-177556287-1', 'auto');
                ga('send', 'pageview');
            }
        </script>
        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        
        <script src="../../ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../editor.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mode-rust.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../theme-dawn.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>
        

        
        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        <script type="text/javascript" src="../../theme/mode-c_cpp.min.js"></script>
        
        <script type="text/javascript" src="../../src/wasm/xterm.min.js"></script>
        
        <script type="text/javascript" src="../../src/wasm/fit.min.js"></script>
        
        <script type="text/javascript" src="../../src/wasm/shared.js"></script>
        
        <script type="text/javascript" src="../../src/wasm/web.js"></script>
        

        

    </body>
</html>
